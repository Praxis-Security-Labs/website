# Story 7.8: Cross-Page CTA Optimization and Systematic Placement

## Status
Draft

## Story
**As a** website visitor progressing through the Praxis Navigator evaluation process,  
**I want** to encounter strategically placed, contextually relevant calls-to-action that guide me toward the most appropriate next step,  
**so that** I can easily take action when I'm ready to engage, regardless of which page I'm viewing or where I am in my evaluation journey.

## Acceptance Criteria

1. **Systematic CTA Placement Strategy**
   - Hero section CTAs on all primary pages with persona-specific messaging
   - Mid-content CTAs strategically placed after value proposition sections
   - End-of-content CTAs providing clear next steps after information consumption
   - Sticky header CTA that appears on scroll and adapts to page context

2. **Contextual CTA Logic and Personalization**
   - Page-specific CTA messaging aligned with content and user intent
   - Progressive CTA hierarchy: awareness → consideration → decision stage alignment
   - Persona-aware CTA text and destination based on page context and user behavior
   - Exit-intent CTAs offering alternative engagement when users attempt to leave

3. **A/B Testing Framework for CTA Optimization**
   - Split testing capability for CTA wording, color, and placement
   - Performance tracking for different CTA variations across pages
   - Statistical significance testing and automated winner selection
   - Continuous optimization based on conversion performance data

4. **Cross-Page CTA Performance Tracking**
   - Individual CTA click tracking with source page and destination mapping
   - Conversion funnel analysis from CTA click to trial signup or demo request
   - Heat mapping and user behavior analysis for CTA placement optimization
   - ROI measurement for CTA performance across different page types and contexts

## Dev Notes

### Previous Story Insights
Building on the complete Phase 2 foundation (Stories 7.1-7.7), this story creates the systematic conversion infrastructure that ties all content together into a cohesive conversion funnel with optimized user guidance.

### Content Strategy Context
This story implements the "systematic CTA placement" requirements from multiple functional requirements (FR-028, FR-029, FR-034) and addresses the "conversion optimization" problem identified in the PRD's current state analysis.

### Component Specifications
**CTA System Components:** [Source: architecture/components.md#frontend-components]
- Universal CTA component with variant props for different contexts
- Sticky header CTA component with scroll-based triggering
- Exit-intent modal component with alternative engagement options
- Progressive CTA component that adapts based on user journey stage

**A/B Testing Components:** [Source: architecture/frontend-architecture.md#component-template]
- A/B testing wrapper component for CTA variations
- Performance tracking component for CTA analytics
- Conversion attribution component for funnel analysis
- Statistical significance component for test result validation

### File Locations
**CTA System Integration:** [Source: architecture/unified-project-structure.md]
- `apps/website/src/components/cta/UniversalCTA.astro` - Main CTA component with variants
- `apps/website/src/components/cta/StickyHeaderCTA.astro` - Scroll-activated header CTA
- `apps/website/src/components/cta/ExitIntentCTA.astro` - Exit-intent engagement modal
- `apps/website/src/components/cta/ProgressiveCTA.astro` - Journey-aware CTA logic

**A/B Testing Framework:** [Source: architecture/unified-project-structure.md]
- `apps/website/src/components/testing/ABTestWrapper.astro` - A/B testing container
- `apps/website/src/components/analytics/CTATracking.astro` - CTA performance tracking
- `apps/website/src/utils/abTesting.js` - A/B testing logic and variant selection
- `apps/website/src/utils/ctaOptimization.js` - CTA optimization algorithms

### Data Models
**CTA Configuration Interface:** [Source: architecture/data-models.md#content-data-models]
```typescript
interface CTAConfig {
  id: string;
  type: 'hero' | 'mid-content' | 'end-content' | 'sticky' | 'exit-intent';
  context: {
    page: string;
    section: string;
    persona?: string;
    journeyStage: 'awareness' | 'consideration' | 'decision';
  };
  variants: CTAVariant[];
  placement: {
    position: string;
    trigger?: 'scroll' | 'time' | 'exit-intent';
    delay?: number;
  };
  tracking: {
    event: string;
    category: string;
    utmSource: string;
    leadScore: number;
  };
}

interface CTAVariant {
  id: string;
  text: string;
  destination: string;
  style: 'primary' | 'secondary' | 'outline';
  icon?: string;
  testWeight: number;
  performance: {
    views: number;
    clicks: number;
    conversions: number;
    conversionRate: number;
  };
}
```

**A/B Testing Framework Interface:** [Source: architecture/frontend-architecture.md#component-template]
```typescript
interface ABTest {
  id: string;
  name: string;
  status: 'draft' | 'active' | 'paused' | 'completed';
  variants: ABTestVariant[];
  allocation: {
    control: number;
    variants: number[];
  };
  targeting: {
    pages: string[];
    personas?: string[];
    trafficPercentage: number;
  };
  goals: {
    primary: string;
    secondary: string[];
  };
  results: {
    startDate: Date;
    endDate?: Date;
    significance: number;
    winner?: string;
    lift?: number;
  };
}

interface CTAPerformanceMetrics {
  ctaId: string;
  period: string;
  metrics: {
    impressions: number;
    clicks: number;
    clickThroughRate: number;
    conversions: number;
    conversionRate: number;
    revenue: number;
    averagePosition: number;
  };
}
```

### API Specifications
**CTA Analytics and Testing Endpoints:** [Source: architecture/api-specification.md#rest-api-specification]
- `/api/cta/track-click` - POST endpoint for CTA click tracking
- `/api/testing/assign-variant` - GET endpoint for A/B test variant assignment
- `/api/analytics/cta-performance` - GET endpoint for CTA performance metrics
- `/api/testing/results` - GET endpoint for A/B test results and statistical significance
- Response format: `{ success: boolean; data: CTAMetrics | ABTestResults | VariantAssignment; error?: ErrorObject }`

**Conversion Attribution Tracking:** [Source: architecture/components.md#form-component]
- `/api/conversions/attribute` - POST endpoint for conversion attribution
- Integration with existing lead capture for CTA source tracking

### Testing Requirements
**CTA Component Testing:** [Source: architecture/testing-strategy.md#frontend-component-test]
- Unit tests for CTA variant rendering and click tracking
- Sticky header CTA scroll trigger functionality tests
- Exit-intent modal trigger and display tests
- Progressive CTA logic and context awareness tests

**A/B Testing Framework Testing:** [Source: architecture/testing-strategy.md#backend-api-test]
- A/B test variant assignment and consistency tests
- Statistical significance calculation validation tests
- Performance tracking accuracy and attribution tests
- Cross-page CTA tracking and funnel analysis tests

**User Experience Testing:** [Source: architecture/testing-strategy.md#e2e-test]
- Complete user journey testing with CTA interactions
- Cross-device CTA display and functionality testing
- Performance testing for CTA loading and responsiveness
- Conversion funnel testing from CTA click to completion

### Technical Constraints
**Praxis Design System Compliance:** [Source: architecture/coding-standards.md#critical-fullstack-rules]
- Use existing button and modal components from Praxis design system
- Maintain consistent CTA styling while allowing for A/B testing variations
- Follow established spacing and placement guidelines

**Performance and User Experience:** [Source: architecture/coding-standards.md#critical-fullstack-rules]
- CTAs must not negatively impact page load performance
- Smooth animations and transitions for sticky and exit-intent CTAs
- Non-intrusive placement that enhances rather than disrupts user experience

**Privacy and Tracking Compliance:** [Source: architecture/coding-standards.md#critical-fullstack-rules]
- GDPR-compliant tracking and data collection
- User consent management for behavioral tracking
- Clear privacy policy integration for CTA tracking

## Project Structure Notes
CTA optimization system integrates across all existing pages and components, requiring careful coordination with existing layouts and user flows. A/B testing framework should be lightweight and not impact site performance.

## Tasks / Subtasks

### Task 1: CTA Strategy and Placement Analysis (AC: 1, 2)
1.1. Audit existing CTA placement and performance across all website pages
1.2. Develop systematic CTA placement strategy based on user behavior data
1.3. Create persona-specific CTA messaging matrix for different page contexts
1.4. Define progressive CTA hierarchy aligned with buyer journey stages

### Task 2: Universal CTA System Development (AC: 1, 2)
2.1. Build UniversalCTA component with variant and context props [Source: architecture/frontend-architecture.md#component-template]
2.2. Create context-aware CTA logic for page-specific messaging
2.3. Implement persona detection and CTA personalization logic
2.4. Develop CTA placement templates for different page types [Source: architecture/components.md#frontend-components]

### Task 3: Sticky Header CTA Implementation (AC: 1, 2)
3.1. Create StickyHeaderCTA component with scroll-based triggering [Source: architecture/frontend-architecture.md#component-template]
3.2. Implement smooth show/hide animations based on scroll behavior
3.3. Add page context awareness for sticky CTA messaging
3.4. Configure mobile-responsive sticky CTA behavior and placement

### Task 4: Exit-Intent and Progressive CTA Development (AC: 2, 4)
4.1. Build ExitIntentCTA component with mouse movement detection
4.2. Create ProgressiveCTA component that adapts to user journey stage
4.3. Implement alternative engagement options for exit-intent scenarios
4.4. Add behavioral triggers for progressive CTA display logic

### Task 5: A/B Testing Framework Implementation (AC: 3)
5.1. Create ABTestWrapper component for CTA variant testing [Source: architecture/frontend-architecture.md#component-template]
5.2. Implement variant assignment logic with consistent user experience
5.3. Build statistical significance calculation and automatic winner selection
5.4. Create A/B testing dashboard for performance monitoring and control

### Task 6: CTA Performance Tracking and Analytics (AC: 4)
6.1. Implement comprehensive CTA click tracking with source attribution [Source: architecture/data-models.md#lead-data-models]
6.2. Create conversion funnel analysis from CTA click to final conversion
6.3. Set up heat mapping integration for CTA placement optimization
6.4. Build CTA performance dashboards with ROI measurement and insights

### Task 7: Cross-Page CTA Integration and Rollout (AC: 1, 2)
7.1. Integrate systematic CTA placement across all existing pages [Source: architecture/unified-project-structure.md]
7.2. Implement page-specific CTA configurations and messaging
7.3. Add CTA tracking to existing conversion funnels and user flows
7.4. Test complete user journeys with new CTA system implementation

### Task 8: A/B Testing Campaign Setup and Optimization (AC: 3, 4)
8.1. Design initial A/B testing campaigns for high-impact CTAs
8.2. Create testing protocols for CTA wording, placement, and styling variations
8.3. Implement continuous optimization based on performance data
8.4. Set up automated alerts for significant performance changes or test completions

### Task 9: Performance Monitoring and Optimization (AC: 1, 4)
9.1. Monitor CTA system impact on page load performance [Source: architecture/coding-standards.md#critical-fullstack-rules]
9.2. Optimize CTA rendering and tracking for minimal performance impact
9.3. Test Core Web Vitals compliance with new CTA system implementation
9.4. Verify cross-browser compatibility for all CTA components and tracking

### Task 10: Conversion Attribution and Reporting (AC: 4)
10.1. Implement end-to-end conversion attribution from CTA click to revenue
10.2. Create executive reporting dashboards for CTA performance and ROI
10.3. Set up automated reporting for CTA optimization insights and recommendations
10.4. Integrate CTA performance with existing sales and marketing analytics

### Task 11: User Experience Testing and Refinement (AC: 1, 2, 3)
11.1. Conduct user experience testing for CTA placement and messaging
11.2. Test mobile responsiveness and touch interaction for all CTA types
11.3. Verify accessibility compliance for CTA components and interactions
11.4. Gather user feedback on CTA effectiveness and non-intrusiveness

### Task 12: Internationalization and Localization (AC: 1, 2)
12.1. Extract all CTA text and messaging to i18n files [Source: architecture/coding-standards.md#critical-fullstack-rules]
12.2. Implement localized CTA messaging for Norwegian and European markets
12.3. Test A/B testing framework functionality with localized content
12.4. Verify CTA performance tracking accuracy across different languages

## Definition of Done

- [ ] Systematic CTA placement implemented across all website pages
- [ ] Contextual CTA logic providing persona-aware and journey-stage-appropriate messaging
- [ ] Sticky header CTA functional with smooth scroll-based triggering
- [ ] Exit-intent CTA system capturing users attempting to leave with alternative engagement
- [ ] A/B testing framework operational for continuous CTA optimization
- [ ] Comprehensive CTA performance tracking with conversion attribution
- [ ] Cross-page conversion funnel analysis providing actionable insights
- [ ] Performance metrics maintained (no negative impact on page load speeds)
- [ ] Mobile responsiveness and accessibility compliance for all CTA components
- [ ] Statistical significance testing and automated optimization working
- [ ] Executive dashboards providing CTA performance and ROI visibility
- [ ] Internationalization support working for both English and Norwegian
- [ ] All tests pass (unit, integration, E2E, performance, accessibility)
- [ ] Code review completed and Praxis Design System compliance verified
- [ ] CTA strategy and implementation approved by user through defined workflow

## Business Value

### Conversion Rate Optimization
- **Systematic Guidance:** Strategic CTA placement guides users toward conversion at optimal moments
- **Reduced Friction:** Clear, contextual CTAs eliminate confusion about next steps
- **Increased Conversions:** Optimized CTA system expected to improve overall conversion rates by 15-25%

### Data-Driven Optimization
- **Continuous Improvement:** A/B testing framework enables ongoing conversion optimization
- **Performance Insights:** Detailed analytics provide actionable insights for further optimization
- **ROI Measurement:** Clear attribution from CTA interactions to revenue generation

### User Experience Enhancement
- **Contextual Relevance:** Persona-aware CTAs provide relevant next steps for different user types
- **Non-Intrusive Design:** Strategic placement enhances rather than disrupts user experience
- **Progressive Engagement:** Journey-aware CTAs respect user readiness and decision-making process

### Revenue Impact
- **Pipeline Acceleration:** Optimized CTAs reduce time from awareness to trial signup
- **Lead Quality Improvement:** Better CTA targeting generates more qualified prospects
- **Sales Efficiency:** Clear conversion paths reduce sales team effort required per lead
