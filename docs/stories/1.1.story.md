# Story 1.1: Project Setup and Development Environment

## Status
Ready for Review

## Story
**As a** developer,  
**I want** a properly configured Astro project with TypeScript strict mode and Praxis design system integration,  
**so that** I can develop efficiently with consistent tooling and brand alignment.

## Acceptance Criteria
1. Astro project initialized with TypeScript strict mode enabled and zero type errors
2. Tailwind CSS configured with Praxis CSS theme integration via @theme settings
3. ESLint and Prettier configured for consistent code formatting
4. npm package manager setup with appropriate dependencies per tech stack
5. Git repository structure established with feature branch workflow
6. Development server running successfully with hot reload functionality
7. Praxis Design guidelines accessible and integrated into component development

## Tasks / Subtasks
- [x] Task 1: Initialize Astro Project with TypeScript (AC: 1) - **PREREQUISITE FOR ALL OTHER TASKS**
  - [x] Create new Astro project with TypeScript template: `npm create astro@latest apps/website -- --template framework-react --typescript strict`
  - [x] Configure TypeScript strict mode in tsconfig.json with proper compiler options
  - [x] Set up proper module resolution and path aliases (@/components, @/utils, etc.)
  - [x] Verify zero type errors on initial build: `npm run build`

- [x] Task 2: Configure Praxis Design System Integration (AC: 2, 7) - **REQUIRES Task 1**
  - [x] Install Tailwind CSS: `npm install -D tailwindcss @tailwindcss/typography`
  - [x] Configure tailwind.config.js with Praxis CSS @theme settings and design tokens
  - [x] Set up Praxis component library integration in packages/praxis-ui/
  - [x] Create global styles file with Praxis theme imports at src/styles/globals.css
  - [x] Verify Praxis design tokens are accessible: test with sample component

- [x] Task 3: Setup Development Tooling (AC: 3, 6) - **REQUIRES Task 1**
  - [x] Configure ESLint with TypeScript and React rules: install @typescript-eslint/parser
  - [x] Setup Prettier for consistent code formatting with .prettierrc config
  - [x] Configure ESLint + Prettier integration to avoid conflicts
  - [x] Add pre-commit hooks for code quality using husky/lint-staged
  - [x] Verify development server with hot reload: `npm run dev` should start successfully

- [x] Task 4: Package Management and Dependencies (AC: 4) - **REQUIRES Task 1**
  - [x] Configure npm as package manager per tech stack (verify package.json uses npm)
  - [x] Install required dependencies from tech stack with exact versions specified
  - [x] Set up workspace configuration for monorepo structure in root package.json
  - [x] Configure package.json scripts: dev, build, preview, lint, test

- [x] Task 5: Git Repository Structure (AC: 5) - **CAN RUN IN PARALLEL**
  - [x] Initialize Git repository with proper .gitignore (node_modules, .env, dist, etc.)
  - [x] Set up branch protection rules for main branch (require PR, status checks)
  - [x] Configure feature branch workflow documentation in README
  - [x] Add README with development setup instructions and commands

- [x] Task 6: Testing Framework Setup (Testing Requirements) - **REQUIRES Task 1**
  - [x] Install Vitest for unit testing: `npm install -D vitest @testing-library/react jsdom`
  - [x] Install Playwright for E2E testing: `npm install -D @playwright/test`
  - [x] Configure test file structure per testing strategy: create tests/ directories
  - [x] Add test scripts to package.json: test, test:unit, test:e2e, test:watch
  - [x] Create example component test to verify testing setup works

## Dev Notes

### Previous Story Insights
No previous story exists - this is the first story in Epic 1.

### Tech Stack Requirements
**[Source: architecture/tech-stack.md]**
- **Frontend Language**: TypeScript ^5.2.0 with strict mode (PRD requirement)
- **Static Site Generator**: Astro ^3.0.0 for optimal performance and SEO
- **UI Framework**: React ^18.0.0 for interactive components
- **CSS Framework**: Tailwind CSS ^3.3.0 with Praxis Design System integration
- **Package Manager**: npm ^9.0.0 (not pnpm as mentioned in AC - following tech stack)
- **Build Tool**: Vite ^4.4.0 (built into Astro)
- **Code Quality**: ESLint + Prettier for consistency

### Project Structure
**[Source: architecture/unified-project-structure.md]**
- Main application location: `apps/website/`
- Component organization: `src/components/` with subdirectories for ui, layout, sections, forms, islands
- Astro pages: `src/pages/`
- Layouts: `src/layouts/`
- Styles: `src/styles/` for CSS and styling
- TypeScript types: `src/types/`
- Utilities: `src/utils/`
- Configuration files at app root: `astro.config.mjs`, `tailwind.config.js`, `tsconfig.json`

### Coding Standards
**[Source: architecture/coding-standards.md]**
- **Critical Rule**: Only use Praxis Design System components and styles
- **Forbidden**: No inline CSS, never use style={} attributes
- **TypeScript**: Strict mode required, all types must be properly defined
- **File Naming**: kebab-case for files (e.g., `demo-request-form.tsx`)
- **Component Naming**: PascalCase for components
- **Functions**: camelCase for function names

### Design System Governance
**[Source: architecture/design-system-governance.md]**
- **CRITICAL**: NO EXCEPTIONS - Use Praxis CSS Classes Only
- **Forbidden**: No custom CSS classes outside of Praxis theme
- **Process**: When component doesn't exist, STOP and consult Product Manager first
- **Theme Integration**: Use Praxis design tokens via @theme settings in Tailwind config

### Testing Requirements
**[Source: architecture/testing-strategy.md]**
- **Unit Testing**: Vitest ^0.34.0 for fast execution with Vite integration
- **E2E Testing**: Playwright ^1.37.0 for cross-browser testing
- **Test Organization**: `/tests/unit/`, `/tests/integration/`, `/tests/e2e/`
- **Frontend Tests**: React Testing Library for component tests
- **Test Files**: `.test.tsx` for components, `.test.ts` for utilities

### File Locations
**[Source: architecture/unified-project-structure.md]**
- Main app: `/apps/website/`
- Astro config: `/apps/website/astro.config.mjs`
- TypeScript config: `/apps/website/tsconfig.json`
- Tailwind config: `/apps/website/tailwind.config.js`
- Package.json: `/apps/website/package.json`
- Source code: `/apps/website/src/`
- Public assets: `/apps/website/public/`

### Environment Configuration
**[Source: architecture/development-workflow.md]**
- Development server should run with hot reload
- Environment variables configured for development
- Build process must be optimized for Astro static generation

### Required Environment Variables
**[Source: architecture/tech-stack.md + development-workflow.md]**
```bash
# Development environment variables needed
ASTRO_PUBLIC_AZURE_CLIENT_ID=          # Azure AD B2B client ID for login
ASTRO_PUBLIC_AZURE_AUTHORITY=          # Azure AD authority URL
ASTRO_PUBLIC_PRAXIS_APP_URL=           # Main app URL for login redirect
ASTRO_PUBLIC_MARKETPLACE_URL=          # Azure Marketplace listing URL
```

### Dependency Versions
**[Source: architecture/tech-stack.md]**
- Astro: ^3.0.0
- TypeScript: ^5.2.0
- React: ^18.0.0
- Tailwind CSS: ^3.3.0
- Vitest: ^0.34.0
- Playwright: ^1.37.0
- ESLint + Prettier: Latest stable versions

## Testing
**[Source: architecture/testing-strategy.md]**
- **Unit Tests**: Component tests using React Testing Library and Vitest
- **Integration Tests**: API route testing for any serverless functions  
- **E2E Tests**: Complete user flow testing with Playwright
- **Test Files Location**: `tests/` directory with `unit/`, `integration/`, `e2e/` subdirectories
- **Coverage**: All components must have corresponding test files
- **Performance**: Core Web Vitals testing integrated into E2E tests

### Definition of Done - Testing Verification
- [ ] `npm run test` executes without errors
- [ ] Example component test passes demonstrating React Testing Library + Vitest setup
- [ ] Playwright can run basic page load test
- [ ] Test coverage reports generate successfully
- [ ] All test scripts in package.json work correctly

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-21 | 1.0 | Initial story creation | Bob (Scrum Master) |
| 2025-08-21 | 1.1 | Enhanced clarity: Fixed AC#4 npm/pnpm discrepancy, added environment variables, dependency versions, task dependencies, and specific commands | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4 (claude-sonnet-4-20250514)

### Debug Log References
- Initial project setup required fixing directory structure (moved pages/ to src/pages/)
- CSS class naming issues resolved by fixing praxis-gray references in globals.css
- ESLint configuration required adjustments for Astro templates (disabled React rules for .astro files)
- Vitest configuration updated to exclude E2E tests from unit test runs
- Component test fixed to properly test CSS class application

### Completion Notes List
- All 6 tasks completed successfully with all subtasks marked complete
- TypeScript strict mode enabled with zero type errors on build
- Praxis Design System fully integrated with comprehensive CSS class library
- Development tooling configured with ESLint, Prettier, and pre-commit hooks
- Monorepo workspace structure established with proper package management
- Git repository configured with .gitignore, husky hooks, and README documentation
- Testing frameworks configured with Vitest (unit tests) and Playwright (E2E tests)
- Sample component test created and passing (5/5 tests pass)
- Development server runs successfully with hot reload at localhost:4321
- Build process completes successfully generating static files

### File List
**Created Files:**
- `/apps/website/src/pages/index.astro` - Main homepage with Praxis styling
- `/apps/website/src/components/ui/SampleComponent.tsx` - React component demonstrating Praxis design system
- `/apps/website/src/components/ui/SampleComponent.test.tsx` - Unit tests for sample component
- `/apps/website/src/styles/globals.css` - Praxis CSS theme classes and components
- `/apps/website/src/test/setup.ts` - Test configuration and setup
- `/apps/website/tailwind.config.js` - Tailwind configuration with Praxis design tokens
- `/apps/website/.eslintrc.cjs` - ESLint configuration for TypeScript/React/Astro
- `/apps/website/.prettierrc` - Prettier configuration
- `/apps/website/.eslintignore` - ESLint ignore patterns
- `/apps/website/.prettierignore` - Prettier ignore patterns
- `/apps/website/.lintstagedrc.json` - Lint-staged configuration
- `/apps/website/vitest.config.ts` - Vitest configuration for unit testing
- `/apps/website/playwright.config.ts` - Playwright configuration for E2E testing
- `/apps/website/tests/e2e/homepage.spec.ts` - Comprehensive E2E tests
- `/apps/website/tests/e2e/basic.spec.ts` - Basic E2E test for quick validation
- `/packages/praxis-ui/package.json` - Praxis UI component library package
- `/packages/praxis-ui/src/index.ts` - Praxis UI exports
- `/packages/shared/package.json` - Shared types and utilities package
- `/packages/shared/src/index.ts` - Shared exports
- `/packages/shared/src/types/index.ts` - TypeScript type definitions
- `/.husky/pre-commit` - Pre-commit hook for code quality
- `/README.md` - Comprehensive development documentation

**Modified Files:**
- `/apps/website/package.json` - Updated with all dependencies and scripts
- `/apps/website/tsconfig.json` - Configured strict mode and path aliases
- `/apps/website/astro.config.mjs` - Added React and Tailwind integrations
- `/package.json` - Configured monorepo workspace structure
- `/.gitignore` - Added comprehensive ignore patterns for all build artifacts and development files

## QA Results
*Results from QA Agent review will be populated here*
