# Story 3.4: Pricing, Trial, and Azure Marketplace Integration

## Status
Approved

## Story
**As an** enterprise prospect,  
**I want** transparent pricing information and seamless trial access through Azure Marketplace,  
**so that** I can evaluate Praxis Navigator without procurement friction and understand the investment required.

## Acceptance Criteria
1. Clear pricing table with feature tiers and transparent pricing structure
2. Prominent 30-day free trial messaging with clear value proposition
3. Azure Marketplace integration with direct navigation from signup buttons to listing URL
4. MSAL authentication popup enabling seamless login redirect to app.praxisnavigator.io
5. Enterprise procurement messaging highlighting Azure Marketplace benefits and familiar purchasing process
6. Feature comparison table showing capabilities across different pricing tiers
7. Contact and demo request forms optimized for enterprise qualification and lead scoring

## Tasks / Subtasks
- [ ] Task 1: Pricing Page Layout and Structure (AC: 1, 2, 6) - **PREREQUISITE FOR ALL OTHER TASKS**
  - [ ] Create `src/pages/[lang]/pricing.astro` page using BaseLayout
  - [ ] Implement semantic HTML structure with proper heading hierarchy (h1, h2, h3)
  - [ ] Add breadcrumb navigation: Home > Pricing
  - [ ] Configure meta tags for SEO optimization targeting "Praxis Navigator pricing", "security training ROI", "enterprise pricing"
  - [ ] Implement responsive design with mobile-first approach across all breakpoints
  - [ ] Ensure accessibility compliance with WCAG 2.1 AA standards

- [ ] Task 2: Pricing Hero Section Component (AC: 1, 2) - **REQUIRES Task 1**
  - [ ] Create `src/components/sections/PricingHeroSection.tsx` with Praxis design system styling
  - [ ] Implement headline "Transparent Pricing for Enterprise Security Training ROI" with proper h1 hierarchy
  - [ ] Add value proposition messaging emphasizing transparent pricing and ROI clarity
  - [ ] Include 30-day free trial prominent messaging with urgency and value emphasis
  - [ ] Add primary CTA "Start Free Trial" linking to Azure Marketplace listing
  - [ ] Implement secondary CTA "Schedule Pricing Consultation" for enterprise prospects
  - [ ] Use praxis-dark-blue gradient background with praxis-gold accent text

- [ ] Task 3: Pricing Tiers Table Component (AC: 1, 6) - **REQUIRES Task 2**
  - [ ] Create `src/components/sections/PricingTiersSection.tsx` for transparent pricing display
  - [ ] Implement three-tier pricing structure: Starter, Professional, Enterprise
  - [ ] Add feature comparison table with clear inclusion/exclusion indicators
  - [ ] Include per-user pricing with volume discounts for enterprise tiers
  - [ ] Add billing frequency options: monthly and annual with discount incentives
  - [ ] Include "Most Popular" badge for Professional tier positioning
  - [ ] Use card-primary styling for tier cards with clear visual hierarchy
  - [ ] Ensure table is fully responsive with horizontal scrolling on mobile

- [ ] Task 4: Feature Comparison Matrix Component (AC: 6) - **REQUIRES Task 3**
  - [ ] Create `src/components/sections/FeatureComparisonSection.tsx` for detailed capabilities
  - [ ] Implement comprehensive feature matrix: Behavioral Monitoring, Executive Dashboards, Compliance Reporting, API Access, Support Levels
  - [ ] Add feature categories: Core Analytics, Reporting & Dashboards, Integrations & APIs, Compliance & Security, Support & Training
  - [ ] Include clear inclusion indicators: checkmarks, crosses, and "Available" text
  - [ ] Add feature detail tooltips with explanations for complex capabilities
  - [ ] Implement responsive table with clear mobile optimization
  - [ ] Use consistent iconography for feature availability and premium features

- [ ] Task 5: Trial Access and Azure Marketplace Integration (AC: 2, 3, 4, 5) - **REQUIRES Task 2**
  - [ ] Create `src/components/sections/TrialAccessSection.tsx` for trial signup workflow
  - [ ] Implement prominent 30-day free trial section with value messaging
  - [ ] Add Azure Marketplace integration with direct link to listing URL from environment variable
  - [ ] Include enterprise procurement benefits messaging: familiar process, existing Azure relationship, consolidated billing
  - [ ] Add MSAL authentication popup integration for seamless trial access
  - [ ] Implement trial value stack: full feature access, no credit card required, enterprise support
  - [ ] Configure marketplace redirect tracking with UTM parameters for attribution

- [ ] Task 6: MSAL Authentication Integration Component (AC: 4) - **REQUIRES Task 5**
  - [ ] Create `src/components/ui/AzureLoginButton.tsx` for authentication flow
  - [ ] Implement MSAL Browser SDK integration with Azure AD B2B configuration
  - [ ] Configure authentication popup with redirect to app.praxisnavigator.io after successful auth
  - [ ] Add loading states and error handling for authentication process
  - [ ] Include organizational login messaging for enterprise directory access
  - [ ] Implement proper error boundaries and fallback states
  - [ ] Add analytics tracking for authentication attempts and success rates

- [ ] Task 7: Enterprise Contact and Demo Forms (AC: 7) - **REQUIRES Tasks 3, 4**
  - [ ] Create `src/components/forms/PricingContactForm.tsx` for enterprise qualification
  - [ ] Implement contact fields: name, title, company, email, phone, organization size
  - [ ] Add pricing inquiry fields: tier interest, user count estimate, specific requirements
  - [ ] Include demo request option: pricing consultation, feature demonstration, enterprise onboarding
  - [ ] Add qualification scoring: budget authority, timeline, organizational decision-making role
  - [ ] Implement form validation with proper error messaging and accessibility
  - [ ] Configure form submission to HubSpot CRM with pricing-qualified lead tagging

- [ ] Task 8: Procurement Process Messaging Section (AC: 5) - **REQUIRES Task 5**
  - [ ] Create `src/components/sections/ProcurementProcessSection.tsx` for enterprise messaging
  - [ ] Implement "Simplified Enterprise Procurement" headline with h2 hierarchy
  - [ ] Add Azure Marketplace benefits: existing vendor relationship, streamlined approvals, consolidated billing
  - [ ] Include procurement timeline messaging: immediate trial access, flexible contract terms, enterprise support
  - [ ] Add purchasing options: credit card, purchase order, Azure consumption credits
  - [ ] Include security and compliance trust indicators: SOC2, GDPR, enterprise security standards
  - [ ] Use card-accent styling for procurement benefit highlights

- [ ] Task 9: ROI Calculator Integration Section (AC: 1, 6) - **REQUIRES Tasks 3, 4**
  - [ ] Create `src/components/sections/ROICalculatorSection.tsx` for value demonstration
  - [ ] Implement interactive ROI calculator with organization size and current SAT investment inputs
  - [ ] Add calculated outputs: potential savings, risk reduction, training effectiveness improvement
  - [ ] Include downloadable ROI report with personalized calculations
  - [ ] Add comparison against no-solution baseline and competitive alternatives
  - [ ] Implement lead capture gating for ROI report download
  - [ ] Use interactive form elements with real-time calculation updates

- [ ] Task 10: Pricing FAQ Section (AC: 1, 5, 6) - **REQUIRES Tasks 3, 4, 8**
  - [ ] Create `src/components/sections/PricingFAQSection.tsx` for common questions
  - [ ] Implement expandable FAQ items: pricing structure, billing options, enterprise discounts, contract terms
  - [ ] Add marketplace-specific questions: Azure credit usage, procurement process, billing integration
  - [ ] Include feature-specific questions: user limits, data retention, API access, support levels
  - [ ] Add security and compliance questions: data residency, certifications, audit requirements
  - [ ] Implement search functionality for FAQ items
  - [ ] Use card-hoverable styling for interactive FAQ items

- [ ] Task 11: Final Conversion Section (AC: 2, 3, 4, 7) - **REQUIRES Tasks 5, 6, 7**
  - [ ] Create `src/components/sections/PricingFinalCtaSection.tsx` for conversion optimization
  - [ ] Implement headline "Start Your Risk-Free Trial Today" with urgency messaging
  - [ ] Add value stack: 30-day trial, full feature access, enterprise support, no commitment
  - [ ] Include dual CTA layout: "Start Azure Trial" (primary) and "Schedule Enterprise Demo" (secondary)
  - [ ] Add trust indicators: 30-day money-back guarantee, enterprise security, immediate access
  - [ ] Include customer testimonials specific to pricing and ROI satisfaction
  - [ ] Use praxis-dark-blue background with praxis-gold accent text

- [ ] Task 12: Page Integration and Testing (AC: 1-7) - **REQUIRES Tasks 1-11**
  - [ ] Integrate all pricing sections into complete pricing page
  - [ ] Implement proper spacing and visual hierarchy between sections
  - [ ] Add smooth scrolling and anchor navigation for pricing tiers and features
  - [ ] Configure analytics tracking for pricing page conversion funnel analysis
  - [ ] Test MSAL authentication flow and marketplace redirect functionality
  - [ ] Test contact form submission workflow and CRM integration
  - [ ] Validate all internal links and external marketplace destinations
  - [ ] Ensure consistent Praxis design system usage across all components

- [ ] Task 13: Azure Marketplace Link Configuration (AC: 3, 5) - **REQUIRES Task 5**
  - [ ] Configure ASTRO_PUBLIC_MARKETPLACE_URL environment variable for marketplace listing
  - [ ] Implement marketplace redirect tracking with UTM parameters for attribution
  - [ ] Add marketplace link validation and error handling for unavailable listings
  - [ ] Test marketplace navigation and ensure proper external link behavior
  - [ ] Configure marketplace links across all CTAs and trial access points
  - [ ] Add analytics tracking for marketplace click-through rates
  - [ ] Implement fallback contact form for marketplace unavailability

- [ ] Task 14: SEO and Performance Optimization (AC: 1, 2, 3) - **REQUIRES Tasks 12, 13**
  - [ ] Optimize pricing page for keywords: "Praxis Navigator pricing", "security training ROI", "enterprise security pricing"
  - [ ] Implement structured data for pricing information and enterprise offerings
  - [ ] Add Open Graph and Twitter Card meta tags for social sharing
  - [ ] Optimize pricing table images and ROI calculator graphics with proper alt text
  - [ ] Implement lazy loading for non-critical pricing components and calculator elements
  - [ ] Ensure Core Web Vitals compliance (LCP <2.5s, FID <100ms, CLS <0.1)
  - [ ] Add hreflang tags for English/Norwegian pricing content

- [ ] Task 15: Testing and Validation (Testing Requirements) - **REQUIRES Tasks 1-14**
  - [ ] Create component tests for all pricing sections (Hero, Tiers, Features, Trial, MSAL, Contact, Procurement, ROI, FAQ, FinalCta)
  - [ ] Test responsive design across all breakpoints with complex pricing tables and calculator components
  - [ ] Validate accessibility with keyboard navigation, screen readers, and ARIA labels for pricing content
  - [ ] Test MSAL authentication flow with proper popup handling and redirect behavior
  - [ ] Test marketplace link navigation and UTM tracking functionality
  - [ ] Test contact form submission workflow and qualification scoring
  - [ ] Perform pricing page conversion funnel testing with analytics tracking validation
  - [ ] Test ROI calculator functionality with various input scenarios
  - [ ] Test page performance with pricing tables and interactive calculator elements
  - [ ] Validate SEO implementation with pricing keywords and structured data

## Dev Notes

### Previous Story Insights
**[Source: Stories 2.1-2.4, 3.1-3.3 - Approved]**
- Homepage established hero section and authority positioning patterns effective for conversion-focused content
- About page created comprehensive Kai Roer credibility foundation useful for enterprise trust building
- Product Overview page provides technical differentiation content that can support feature comparison messaging
- SEO foundation implemented with structured data and meta tag optimization capabilities proven effective
- BaseLayout.astro proven effective for consistent page structure and navigation across all pages
- Praxis design system integration operational with established component patterns for cards, buttons, and forms
- Stories 3.1-3.3 demonstrated successful segment-specific page creation patterns with conversion optimization
- Form processing and HubSpot CRM integration patterns established and proven functional

### Pricing and Enterprise Procurement Requirements
**[Source: Epic 3.4 AC + docs/brief.md#business-goals]**
- **Transparent Pricing**: Clear pricing structure without hidden costs or complex calculation requirements
- **Enterprise Focus**: Pricing and messaging targeted at organizations with 200+ employees and significant SAT investments
- **Azure Marketplace Integration**: Direct integration with Azure Marketplace for familiar enterprise procurement process
- **Trial Access**: 30-day free trial with full feature access and no credit card requirement
- **ROI Demonstration**: Clear value proposition with quantifiable business benefits and cost-benefit analysis
- **Procurement Benefits**: Emphasis on streamlined enterprise purchasing through existing Azure relationships

### Azure Marketplace and MSAL Integration
**[Source: Epic 3.4 AC + architecture/external-apis.md#azure-marketplace-listing + architecture/external-apis.md#azure-msal-b2b-api]**
- **Marketplace URL**: Configured via ASTRO_PUBLIC_MARKETPLACE_URL environment variable for easy updates
- **MSAL Configuration**: Azure AD B2B authentication with /organizations/ endpoint for enterprise directories
- **Authentication Flow**: Popup-based authentication redirecting to app.praxisnavigator.io after successful login
- **UTM Tracking**: Marketplace links include UTM parameters for attribution and conversion tracking
- **Enterprise Integration**: Leverages existing Azure relationships for streamlined procurement and billing

### Pricing Structure and Feature Tiers
**[Source: Epic 3.4 AC + docs/brief.md#proposed-solution]**
- **Three-Tier Structure**: Starter, Professional, Enterprise with clear feature differentiation
- **Feature Categories**: Behavioral Monitoring, Executive Dashboards, Compliance Reporting, API Access, Support Levels
- **Enterprise Features**: Advanced compliance reporting, dedicated support, API access, custom integrations
- **Billing Options**: Monthly and annual billing with enterprise volume discounts
- **Trial Positioning**: 30-day full-feature trial with no credit card requirement

### ROI Calculator and Value Demonstration
**[Source: Epic 3.4 AC + docs/brief.md#competitive-landscape-analysis]**
- **ROI Inputs**: Organization size, current SAT investment, security training budget, compliance requirements
- **Calculated Outputs**: Potential cost savings, risk reduction percentages, training effectiveness improvement
- **Value Metrics**: Behavioral change measurement, executive reporting efficiency, compliance automation benefits
- **Comparison Baseline**: Current state vs. Praxis Navigator implementation with quantified improvements
- **Lead Capture**: ROI report download requires contact information for qualification and follow-up

### Page Architecture and UX Design
**[Source: Epic 3.4 AC + docs/wireframes-user-flows.md#pricing-evaluation-journey]**
- **Hero Section**: Height 500px, praxis-dark-blue gradient, headline "Transparent Pricing for Enterprise Security Training ROI"
- **Pricing Tiers**: Three-column layout with clear feature comparison and "Most Popular" tier highlighting
- **Trial Access**: Prominent positioning with Azure Marketplace integration and MSAL authentication
- **Feature Comparison**: Comprehensive matrix with detailed capability explanations and tooltips
- **Procurement Messaging**: Enterprise-focused benefits and streamlined purchasing process
- **Conversion Section**: Dual CTA approach with trial and enterprise demo options

### MSAL Authentication Integration
**[Source: architecture/frontend-architecture.md#authentication-flow-explanation + architecture/external-apis.md#azure-msal-b2b-api]**
- **MSAL Browser SDK**: @azure/msal-browser integration with popup authentication flow
- **Configuration**: Azure AD B2B with /organizations/ endpoint for enterprise directory access
- **Redirect Flow**: Successful authentication redirects to app.praxisnavigator.io for seamless user experience
- **Security**: OAuth 2.0 with PKCE flow for enterprise directories and secure token handling
- **Error Handling**: Proper error boundaries and fallback states for authentication failures

### File Locations and Project Structure
**[Source: architecture/unified-project-structure.md + Story 3.1-3.3 patterns]**
- **Pricing Page**: `/apps/website/src/pages/[lang]/pricing.astro`
- **Hero Section**: `/apps/website/src/components/sections/PricingHeroSection.tsx`
- **Pricing Tiers**: `/apps/website/src/components/sections/PricingTiersSection.tsx`
- **Feature Comparison**: `/apps/website/src/components/sections/FeatureComparisonSection.tsx`
- **Trial Access**: `/apps/website/src/components/sections/TrialAccessSection.tsx`
- **Azure Login Button**: `/apps/website/src/components/ui/AzureLoginButton.tsx`
- **Pricing Contact Form**: `/apps/website/src/components/forms/PricingContactForm.tsx`
- **Procurement Process**: `/apps/website/src/components/sections/ProcurementProcessSection.tsx`
- **ROI Calculator**: `/apps/website/src/components/sections/ROICalculatorSection.tsx`
- **Pricing FAQ**: `/apps/website/src/components/sections/PricingFAQSection.tsx`
- **Final CTA**: `/apps/website/src/components/sections/PricingFinalCtaSection.tsx`
- **Assets**: `/apps/website/public/images/pricing/` for pricing graphics, feature icons, and marketplace logos

### Form Integration and CRM Configuration
**[Source: architecture/external-apis.md#hubspot-crm-api + architecture/backend-architecture.md]**
- **HubSpot Integration**: Serverless function `/apps/website/functions/forms/submit.ts` for lead capture
- **Pricing Segment Tagging**: "pricing-qualified" segment for proper lead routing and qualification
- **Qualification Fields**: Budget authority, timeline, organization size, tier interest, user count estimate
- **Contact Information**: Name, title, company, email, phone with enterprise validation
- **Follow-up Workflows**: Pricing consultation scheduling, enterprise demo booking, trial follow-up automation

### Enterprise Procurement and Trust Elements
**[Source: Epic 3.4 AC + docs/brief.md#enterprise-market-positioning]**
- **Azure Marketplace Benefits**: Existing vendor relationship, streamlined approvals, consolidated billing, consumption credits
- **Procurement Timeline**: Immediate trial access, flexible contract terms, enterprise support availability
- **Purchasing Options**: Credit card, purchase order, Azure credits with multiple payment methods
- **Security Compliance**: SOC2 Type II, GDPR compliance, enterprise security standards
- **Trust Indicators**: Money-back guarantee, enterprise customer testimonials, security certifications

### Praxis Design System Implementation
**[Source: architecture/design-system-governance.md + docs/praxis-design-manual/praxis-design-manual.md]**
- **Color Usage**: praxis-dark-blue gradient hero, praxis-gold accent text, praxis-white section backgrounds
- **Typography**: H1 with .h1 class, h2 with .h2 class, proper heading hierarchy for pricing content
- **Button Variants**: btn-accent for primary CTAs, btn-primary for secondary, btn-outline for supporting actions
- **Card Components**: card-primary for pricing tiers, card-accent for feature highlights, card-hoverable for interactive elements
- **Table Styling**: Responsive pricing tables with clear visual hierarchy and mobile optimization
- **Icon Implementation**: Only if approved by Product Management, with proper accessibility labels for pricing features

### Analytics and Conversion Tracking
**[Source: architecture/frontend-architecture.md#frontend-services-layer + Epic 3.4 AC]**
- **Pricing Page Analytics**: Conversion funnel tracking for trial signups and enterprise demos
- **Marketplace Attribution**: UTM tracking for Azure Marketplace click-through rates and conversions
- **Authentication Tracking**: MSAL authentication success rates and failure analysis
- **ROI Calculator Usage**: Interaction tracking and lead qualification scoring
- **Form Conversion**: Contact form submission rates and qualification scoring

### SEO and Content Optimization
**[Source: Stories 2.4 - Approved + Epic 3.4 AC]**
- **Target Keywords**: "Praxis Navigator pricing", "security training ROI", "enterprise security pricing", "Azure Marketplace security training"
- **Meta Tags**: Optimized for enterprise procurement search intent and pricing evaluation
- **Structured Data**: Pricing information, software product, enterprise offerings
- **Internal Linking**: Strategic links to Product Overview, About Kai Roer, and segment pages
- **Content Authority**: Connection to transparent pricing and enterprise credibility positioning

### International Considerations
**[Source: architecture/tech-stack.md#internationalization]**
- **Language Support**: English and Norwegian versions with Astro i18n
- **Currency Adaptation**: Pricing display appropriate for US/UK and Nordic markets
- **Compliance References**: Regional security standards and procurement processes

## Testing

**[Source: architecture/testing-strategy.md]**
- **Component Testing**: React Testing Library tests for all pricing sections and forms
- **Integration Testing**: MSAL authentication flow with popup handling and redirect behavior
- **Marketplace Testing**: Azure Marketplace link navigation and UTM tracking functionality
- **Form Testing**: Contact form submission workflows with HubSpot CRM integration and qualification scoring
- **Responsive Testing**: Playwright tests across breakpoints with complex pricing tables and calculator components
- **Accessibility Testing**: WCAG 2.1 AA compliance with keyboard navigation and screen readers for pricing content
- **Conversion Testing**: Analytics tracking validation for trial signups and enterprise demos
- **Performance Testing**: Core Web Vitals validation with pricing tables and interactive calculator elements

### Definition of Done - Testing Verification
- [ ] PricingHeroSection renders with proper transparent pricing messaging and trial positioning
- [ ] PricingTiersSection displays three pricing tiers with clear feature differentiation and responsive design
- [ ] FeatureComparisonSection shows comprehensive feature matrix with tooltips and accessibility compliance
- [ ] TrialAccessSection integrates Azure Marketplace links with proper UTM tracking
- [ ] AzureLoginButton implements MSAL authentication popup with proper error handling
- [ ] PricingContactForm captures enterprise qualification information and validates properly
- [ ] ProcurementProcessSection displays enterprise benefits and trust indicators
- [ ] ROICalculatorSection provides interactive calculations with lead capture gating
- [ ] PricingFAQSection displays searchable FAQ items with expandable content
- [ ] PricingFinalCtaSection provides conversion-optimized CTAs with trial and demo options
- [ ] All sections responsive across breakpoints with proper pricing table and calculator layout
- [ ] Accessibility compliance verified for keyboard navigation and screen reader compatibility
- [ ] MSAL authentication flow tested with proper popup behavior and app.praxisnavigator.io redirect
- [ ] Azure Marketplace links function correctly with UTM tracking and external navigation
- [ ] Contact form submissions integrate with HubSpot CRM and apply proper pricing qualification tagging
- [ ] ROI calculator functions correctly with various input scenarios and lead capture
- [ ] Page performance meets Core Web Vitals thresholds with complex pricing components
- [ ] SEO optimization implemented for pricing keywords and structured data
- [ ] Analytics tracking validates conversion funnels for trial signups and enterprise demos

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-21 | 1.0 | Initial story creation with comprehensive Pricing page requirements, Azure Marketplace integration, and enterprise-focused conversion optimization | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here*
